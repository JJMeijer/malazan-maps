(()=>{var w=Math.pow;var E=e=>{let t=e.split("-").slice(-1);if(t[0])return t[0];throw new Error("Map ID not found")},x=()=>{let e=document.querySelector('[id^="map-imagewrapper-"]:not(.hidden)');if(e){let t=E(e.id);return document.querySelector(`#map-image-${t}`)}return null},T=e=>{let{naturalHeight:t,naturalWidth:n}=e;return{naturalHeight:t,naturalWidth:n}},y=e=>{let{width:t,height:n,top:o,left:r}=e.getBoundingClientRect();return{width:t,height:n,top:o,left:r}},D=e=>{let t=parseInt(window.getComputedStyle(e).getPropertyValue("padding-left").replace("px","")),n=parseInt(window.getComputedStyle(e).getPropertyValue("padding-top").replace("px","")),o=parseInt(window.getComputedStyle(e).getPropertyValue("padding-top").replace("px","")),r=parseInt(window.getComputedStyle(e).getPropertyValue("padding-top").replace("px",""));return{leftPadding:t,rightPadding:n,topPadding:o,bottomPadding:r}},u=()=>{let e=document.querySelector('[id^="map-imagewrapper-"]:not(.hidden)');if(!(e instanceof HTMLDivElement))throw new Error("Imagewrapper element is missing");let{top:t,left:n}=y(e);e.style.transformOrigin=`${-n}px ${-t}px`};var k=(e,t,n)=>Math.min(Math.max(e,t),n),S=()=>{let e=document.getElementById("reset-zoom-button");if(!e)throw new Error("Reset button is missing");e.classList.remove("hidden")},q=()=>{let e=document.getElementById("reset-zoom-button");if(!e)throw new Error("Reset button is missing");e.classList.add("hidden")},B=()=>{document.querySelectorAll("[id^=map-imagewrapper-]").forEach(t=>{if(!(t instanceof HTMLDivElement))throw new Error("element with `map-imagewrapper-` id is not a div element");let n=!1,o=!1,r=1,s=0,a=0,g=0,f=0,m=()=>{t.style.transform=`translate(${s}px, ${a}px) scale(${r})`};t.onmousedown=i=>{i.preventDefault();let{clientX:p,clientY:c,buttons:I}=i;I!==1&&I!==4||(g=p-s,f=c-a,o=!0,t.style.cursor="grabbing")},t.onmouseup=()=>{o=!1,t.style.cursor="grab"},t.onmousemove=i=>{if(i.preventDefault(),!o)return;n||(S(),n=!0);let{clientX:p,clientY:c}=i;s=p-g,a=c-f,m()},t.onwheel=i=>{i.preventDefault(),n||(S(),n=!0);let{clientX:p,clientY:c,deltaY:I}=i,$=(p-s)/r,R=(c-a)/r,V=-I,b=6,L=1,d=1.2;V>0?r=k(r*d,1/w(d,L),w(d,b)):r=k(r/d,1/w(d,L),w(d,b)),s=p-$*r,a=c-R*r,m()};let l=()=>{o=!1,r=1,s=0,a=0,g=0,f=0,m(),q(),n=!1};window.addEventListener("resize",()=>{l(),u()}),document.querySelectorAll('input[name="map-selector"]').forEach(i=>{i.addEventListener("change",l)});let M=document.getElementById("reset-zoom-button");if(!M)throw new Error("Reset button is missing");M.addEventListener("click",l)})};var h=()=>{if(document.getElementsByClassName("map-image-marker").length===0)return;let e=document.querySelector('[id^="map-imagewrapper-"]:not(.hidden)');if(!(e instanceof HTMLDivElement))throw new Error("Imagewrapper element is missing");let t=E(e.id);C(t)},C=e=>{let t=document.getElementById(`map-imagewrapper-${e}`),n=document.getElementById(`map-image-${e}`),o=document.getElementById(`map-marker-${e}`);if(!(t instanceof HTMLDivElement))throw new Error(`Imagewrapper for mapId ${e} is missing`);if(!(n instanceof HTMLImageElement))throw new Error(`Image for mapId ${e} is missing`);if(!(o instanceof HTMLImageElement))throw new Error(`Marker icon for mapId ${e} is missing`);let r=T(n),s=y(n),a=y(o),{leftPadding:g,topPadding:f}=D(t),{markerx:m,markery:l}=o.dataset;if(!m||!l)throw new Error("Marker coordinates not provided");let v=Math.round(parseInt(m)*s.width/r.naturalWidth-a.width/2)+g,M=Math.round(parseInt(l)*s.height/r.naturalHeight-a.height)+f;o.style.top=`${M}px`,o.style.left=`${v}px`,o.style.opacity="0.85"};var A=e=>{let t=e.target,n=E(t.id);document.querySelectorAll("[id^=map-imagewrapper-]").forEach(s=>{s.classList.contains("hidden")||s.classList.add("hidden")});let r=document.getElementById(`map-imagewrapper-${n}`);if(!(r instanceof HTMLElement))throw new Error("Imagewrapper for selected map is missing");r.classList.remove("hidden"),u(),h()},H=()=>{let e=document.querySelectorAll('input[name="map-selector"]'),t=document.querySelectorAll('input[name="map-selector"]~span');e.forEach(n=>{if(!(n instanceof HTMLInputElement))throw new Error("Map Input has unexpected type");n.addEventListener("change",o=>{A(o)})}),t.forEach(n=>{if(!(n instanceof HTMLSpanElement))throw new Error("Map button has unexpected type");n.addEventListener("keydown",o=>{let{key:r}=o;if(r==="Enter"){let s=n.previousElementSibling;if(!(s instanceof HTMLInputElement))throw new Error("Map Button input element missing");s.checked=!0;let a=new Event("change");s.dispatchEvent(a)}})})};var P=()=>{u(),B(),H(),h(),window.addEventListener("resize",()=>{h()})};document.addEventListener("DOMContentLoaded",()=>{let e=x();if(!(e instanceof HTMLImageElement))throw new Error("No Image Available map page");e.complete?P():e.addEventListener("load",()=>{P()})});})();
