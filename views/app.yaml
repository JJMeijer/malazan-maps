runtime: python39

instance_class: F1

handlers:
- url: /sitemap.xml
  secure: always
  redirect_http_response_code: 301
  static_files: sitemap.xml
  upload: sitemap.xml

- url: /robots.txt
  secure: always
  redirect_http_response_code: 301
  static_files: robots.txt
  upload: robots.txt

- url: /favicon.ico
  secure: always
  redirect_http_response_code: 301
  static_files: favicon.ico
  upload: favicon.ico

# Static Files
- url: /static
  secure: always
  redirect_http_response_code: 301
  static_dir: static
  expiration: "365d"
  http_headers:
    Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
    X-Frame-Options: DENY
    X-XSS-Protection: 1; mode=block
    X-Content-Type-Options: nosniff

# Home Page
- url: /
  secure: always
  redirect_http_response_code: 301
  static_files: index.html
  upload: index.html
  http_headers:
    Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
    X-Frame-Options: DENY
    X-XSS-Protection: 1; mode=block
    Content-Security-Policy: default-src 'self' cloudflareinsights.com *.cloudflareinsights.com
    X-Content-Type-Options: nosniff

# All Other Pages
- url: /(.*)/
  secure: always
  redirect_http_response_code: 301
  static_files: \1/index.html
  upload: (.*)/index.html
  http_headers:
    Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
    X-Frame-Options: DENY
    X-XSS-Protection: 1; mode=block
    Content-Security-Policy: default-src 'self' cloudflareinsights.com *.cloudflareinsights.com
    X-Content-Type-Options: nosniff

- url: /(.*)$
  secure: always
  redirect_http_response_code: 301
  static_files: \1/index.html
  upload: (.*)/index.html
  http_headers:
    Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
    X-Frame-Options: DENY
    X-XSS-Protection: 1; mode=block
    Content-Security-Policy: default-src 'self' cloudflareinsights.com *.cloudflareinsights.com
    X-Content-Type-Options: nosniff
