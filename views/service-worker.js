"use strict";(()=>{var w=(e,s)=>()=>(e&&(s=e(e=0)),s);var v=(e,s)=>()=>(s||e((s={exports:{}}).exports,s),s.exports);var l=(e,s,t)=>new Promise((i,a)=>{var u=n=>{try{c(t.next(n))}catch(r){a(r)}},h=n=>{try{c(t.throw(n))}catch(r){a(r)}},c=n=>n.done?i(n.value):Promise.resolve(n.value).then(u,h);c((t=t.apply(e,s)).next())});var m,o=w(()=>{m="1.5.1"});var j=v(d=>{o();var p=`malazan-cache-${m}`,g=[`/static/css/main-dist.css?v=${new Date().getTime()}`,`/static/js/main.js?v=${new Date().getTime()}`,`/data.json?v=${new Date().getTime()}`,`/manifest.json?v=${new Date().getTime()}`];self.addEventListener("install",e=>{let s=()=>l(null,null,function*(){let t=yield caches.open(p);return Promise.all(g.map(i=>l(null,null,function*(){return(yield t.match(i,{ignoreSearch:!0}))?(yield t.delete(i,{ignoreSearch:!0}),yield t.add(i)):yield t.add(i)})))});self.skipWaiting(),e.waitUntil(s())});self.addEventListener("activate",e=>{self.clients.claim(),e.waitUntil(caches.keys().then(s=>Promise.all(s.map(t=>{if(t!==p)return caches.delete(t)}))))});self.addEventListener("fetch",e=>{e.respondWith(caches.open(p).then(s=>s.match(e.request,{ignoreSearch:!0}).then(t=>t||fetch(e.request).then(i=>(e.request.method==="GET"&&(e.request.destination==="image"||e.request.mode==="navigate")&&s.put(e.request,i.clone()),i)))))})});j();})();
