"use strict";(()=>{var l=(s,i,e)=>new Promise((t,n)=>{var m=a=>{try{c(e.next(a))}catch(r){n(r)}},p=a=>{try{c(e.throw(a))}catch(r){n(r)}},c=a=>a.done?t(a.value):Promise.resolve(a.value).then(m,p);c((e=e.apply(s,i)).next())});var o="1.5.1";var d=`malazan-cache-${o}`,h=[`/static/css/main-dist.css?v=${new Date().getTime()}`,`/static/js/main.js?v=${new Date().getTime()}`,`/data.json?v=${new Date().getTime()}`,`/manifest.json?v=${new Date().getTime()}`];self.addEventListener("install",s=>{let i=()=>l(null,null,function*(){let e=yield caches.open(d);return Promise.all(h.map(t=>l(null,null,function*(){return(yield e.match(t,{ignoreSearch:!0}))?(yield e.delete(t,{ignoreSearch:!0}),yield e.add(t)):yield e.add(t)})))});self.skipWaiting(),s.waitUntil(i())});self.addEventListener("activate",s=>{self.clients.claim(),s.waitUntil(caches.keys().then(i=>Promise.all(i.map(e=>{if(e!==d)return caches.delete(e)}))))});self.addEventListener("fetch",s=>{s.respondWith(caches.open(d).then(i=>i.match(s.request,{ignoreSearch:!0}).then(e=>e||fetch(s.request).then(t=>(s.request.method==="GET"&&(s.request.destination==="image"||s.request.mode==="navigate")&&i.put(s.request,t.clone()),t)))))});})();
