{% extends "base.html" %}

{% load cdnstaticfiles %}

{% block navbar %}
{% endblock navbar %}

{% block content %}
    <div class="place-container">
        {% comment %} Left side Menu{% endcomment %}
        <div class="place-left-menu">
            {% comment %} Custom Smaller Navbar {% endcomment %}
            <div class="navbar">
                <a href="{% url "home" %}">
                    <p class="navbar-site-title">
                        Malazan Maps
                    </p>
                </a>
                <p class="navbar-seperator">
                    >
                </p>
                <p class="navbar-page-title">
                    {{ page_title }}
                </p>
            </div>

            <!--Place Title-->
            <p class="place-left-menu-title">
                {{ page_title }}
            </p>

            <!--Searchbox-->
            <div id="search-wrapper" class="place-search-wrapper">
                {% include "components/search.html" %}
            </div>

            <!--Map Selectors (If multiple maps)-->
            <div class="{% if markers|length == 1 %}hidden{% endif %} place-map-selector-wrapper">
                {% for marker in markers|dictsortreversed:"map.priority" %}
                    <label class="place-map-selector-label" for="map-selector-{{ forloop.counter }}">
                        <input
                            class="hidden"
                            type="radio"
                            id="map-selector-{{ forloop.counter }}"
                            name="map-selector"
                            {% if forloop.counter == 1 %}checked{% endif %}
                        >
                        <span tabindex="4" class="place-map-selector-span">
                            {{ marker.map.name }}
                        </span>
                    </label>
                {% endfor %}
            </div>

            <!--Place Description-->
            <div class="place-description-wrapper">
                <p class="place-description-text">
                    {{ description }}
                </p>
            </div>
        </div>

        <!--Maps & Markers-->
        <div class="place-maps-wrapper">
            {% for marker in markers|dictsortreversed:"map.priority" %}
                <div class="place-map-wrapper">
                    <div
                        class="{% if forloop.counter > 1 %}hidden{% endif %} place-image-wrapper"
                        id="map-imagewrapper-{{ forloop.counter }}"
                    >
                        <img
                            src="{{ marker.map.image.url }}"
                            class="object-contain"
                            id="map-image-{{ forloop.counter }}"
                        >
                        <img
                            src="{% cdnstatic "img/marker-1.png" %}"
                            class="place-image-marker object-contain"
                            id="map-marker-{{ forloop.counter }}"
                            data-markerx={{ marker.x }}
                            data-markery={{ marker.y }}
                        >
                    </div>

                </div>
            {% endfor %}
            <div
                class="place-reset-zoom-button hidden"
                id="reset-zoom-button">
                <span>
                    Reset Zoom
                </span>
            </div>
        </div>
    </div>
    <script src="{% cdnstatic "js/place.js" %}"></script>
{% endblock content %}
