{% load cdnstaticfiles %}

<div class="map-view-container">
    <div class="left-header-container">
        <div class="navbar">
            <a href="{% url "home" %}">
                <p class="navbar-site-title">
                    Malazan Maps
                </p>
            </a>
            <p class="navbar-seperator">
                >
            </p>
            <p class="navbar-page-title">
                {{ page_title }}
            </p>
        </div>

        <p class="left-header-title">
            {{ page_title }}
        </p>

        <div id="search-wrapper" class="left-header-search-wrapper">
            {% include "components/search.html" %}
        </div>

        <div class="{% if maps|length == 1 %}hidden{% endif %} map-selector-wrapper">
            {% for map_info in maps|dictsortreversed:"map.priority" %}
                <label class="map-selector-label" for="map-selector-{{ forloop.counter }}">
                    <input
                        class="hidden"
                        type="radio"
                        id="map-selector-{{ forloop.counter }}"
                        name="map-selector"
                        {% if forloop.counter == 1 %}checked{% endif %}
                    >
                    <span tabindex="4" class="map-selector-span">
                        {{ map_info.map.name }}
                    </span>
                </label>
            {% endfor %}
        </div>

        <div class="description-wrapper">
            <p class="description-text">
                {{ description }}
            </p>
        </div>

        <div class="footer-wrapper-left">
            {% include "components/footer.html" %}
        </div>
    </div>

    <div class="maps-wrapper">
        {% for map_info in maps|dictsortreversed:"map.priority" %}
            <div class="map-wrapper">
                <div
                    class="{% if forloop.counter > 1 %}hidden{% endif %} map-image-wrapper"
                    id="map-imagewrapper-{{ forloop.counter }}"
                >
                    <img
                        src="{{ map_info.map.image.url }}"
                        class="object-contain"
                        id="map-image-{{ forloop.counter }}"
                    >
                    {% if 'marker' in map_info %}
                        <img
                            src="{% cdnstatic "img/marker-1.png" %}"
                            class="map-image-marker object-contain"
                            id="map-marker-{{ forloop.counter }}"
                            data-markerx={{ map_info.marker.x }}
                            data-markery={{ map_info.marker.y }}
                        >
                    {% endif %}
                </div>
            </div>
        {% endfor %}
        <div
            class="reset-zoom-button hidden"
            id="reset-zoom-button">
            <img src="{% cdnstatic "img/reset-zoom-w.png" %}" class="object-contain">
        </div>
    </div>
    <script src="{% cdnstatic "js/mapview.js" %}"></script>
</div>
