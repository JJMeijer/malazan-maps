runtime: python39

instance_class: F1

handlers:
- url: /sitemap.xml
  secure: always
  redirect_http_response_code: 301
  static_files: www/sitemap.xml
  upload: www/sitemap.xml
  http_headers:
    Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
    X-Frame-Options: DENY
    X-XSS-Protection: 1; mode=block
    X-Content-Type-Options: nosniff

- url: /robots.txt
  secure: always
  redirect_http_response_code: 301
  static_files: www/static/robots.txt
  upload: www/static/robots.txt
  http_headers:
    Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
    X-Frame-Options: DENY
    X-XSS-Protection: 1; mode=block
    X-Content-Type-Options: nosniff

- url: /favicon.ico
  secure: always
  redirect_http_response_code: 301
  static_files: www/static/img/favicon.ico
  upload: www/static/img/favicon.ico
  http_headers:
    Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
    X-Frame-Options: DENY
    X-XSS-Protection: 1; mode=block
    X-Content-Type-Options: nosniff

# Static Files
- url: /static
  secure: always
  redirect_http_response_code: 301
  static_dir: www/static
  expiration: "365d"
  http_headers:
    Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
    X-Frame-Options: DENY
    X-XSS-Protection: 1; mode=block
    X-Content-Type-Options: nosniff

# Content Files
- url: /content
  secure: always
  redirect_http_response_code: 301
  static_dir: www/content
  expiration: "365d"
  http_headers:
    Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
    X-Frame-Options: DENY
    X-XSS-Protection: 1; mode=block
    X-Content-Type-Options: nosniff

# Home Page
- url: /
  secure: always
  redirect_http_response_code: 301
  static_files: www/index.html
  upload: www/index.html
  http_headers:
    Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
    X-Frame-Options: DENY
    X-XSS-Protection: 1; mode=block
    Content-Security-Policy: default-src 'self' cloudflareinsights.com *.cloudflareinsights.com
    X-Content-Type-Options: nosniff

# All Other Pages
- url: /(.*)/
  secure: always
  redirect_http_response_code: 301
  static_files: www/\1/index.html
  upload: www/(.*)/index.html
  http_headers:
    Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
    X-Frame-Options: DENY
    X-XSS-Protection: 1; mode=block
    Content-Security-Policy: default-src 'self' cloudflareinsights.com *.cloudflareinsights.com
    X-Content-Type-Options: nosniff

- url: /(.*)$
  secure: always
  redirect_http_response_code: 301
  static_files: www/\1/index.html
  upload: www/(.*)/index.html
  http_headers:
    Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
    X-Frame-Options: DENY
    X-XSS-Protection: 1; mode=block
    Content-Security-Policy: default-src 'self' cloudflareinsights.com *.cloudflareinsights.com
    X-Content-Type-Options: nosniff
